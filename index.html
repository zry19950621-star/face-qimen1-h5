<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>ä½ çš„æ°´æœäººæ ¼ç»é…æ˜¯è°ï¼Ÿ</title>

    <!-- ç§»åŠ¨ç«¯é€‚é… -->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="format-detection" content="telephone=no,email=no" />

    <!-- å¾®ä¿¡ / iOS å°ä¼˜åŒ– -->
    <style>
        * { -webkit-tap-highlight-color: rgba(0,0,0,0); }
        body {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
    </style>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap');

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
            background-color: #000;
            color: #fff;
            overflow-x: hidden;
        }
        .serif { font-family: 'Noto Serif SC', "STSong", "Songti SC", serif; }

        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse-slow {
            0%, 100% { transform: scale(1); opacity: 1; }
            50%      { transform: scale(1.05); opacity: 0.8; }
        }
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to   { transform: rotate(360deg); }
        }
        @keyframes slice {
            0%   { width: 0; opacity: 0; left: -50%; }
            50%  { width: 200%; opacity: 1; }
            100% { left: 150%; opacity: 0; width: 0; }
        }
        @keyframes flash {
            0%   { opacity: 0; }
            50%  { opacity: 1; }
            100% { opacity: 0; }
        }

        .animate-fade-in     { animation: fadeIn 0.8s ease-out forwards; }
        .animate-pulse-slow  { animation: pulse-slow 3s infinite ease-in-out; }
        .animate-spin-slow   { animation: spin-slow 8s linear infinite; }
        .animate-slice       { animation: slice 0.6s cubic-bezier(0.22,0.61,0.36,1) forwards; }
        .animate-flash       { animation: flash 0.5s ease-out forwards; }

        ::-webkit-scrollbar { width: 0px; background: transparent; }

        img {
            user-select: none;
            -webkit-user-drag: none;
        }

        .safe-top    { padding-top: env(safe-area-inset-top); }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body class="flex justify-center min-h-screen">

<!-- æ‰‹æœºå°ºå¯¸å®¹å™¨ -->
<div id="app"
     class="w-full max-w-[450px] bg-slate-900 relative shadow-2xl min-h-screen flex flex-col">

    <!-- èƒŒæ™¯ï¼šçº¯æ¸å˜ + æ˜Ÿç‚¹ï¼Œä¸ä¾èµ–å¤–é“¾ -->
    <div class="absolute inset-0 z-0 pointer-events-none">
        <div class="w-full h-full relative bg-gradient-to-b from-slate-950 via-slate-900 to-black">
            <div class="absolute -top-10 -left-10 w-40 h-40 rounded-full bg-orange-500/25 blur-3xl"></div>
            <div class="absolute bottom-0 right-0 w-56 h-56 rounded-full bg-pink-500/20 blur-3xl"></div>
            <div class="absolute inset-0 opacity-30">
                <svg viewBox="0 0 200 200" class="w-full h-full">
                    <defs>
                        <radialGradient id="g" cx="50%" cy="50%" r="70%">
                            <stop offset="0%" stop-color="#ffffff"/>
                            <stop offset="100%" stop-color="#ffffff" stop-opacity="0"/>
                        </radialGradient>
                    </defs>
                    <circle cx="30" cy="40" r="1" fill="url(#g)"/>
                    <circle cx="120" cy="80" r="1.5" fill="url(#g)"/>
                    <circle cx="180" cy="30" r="1.2" fill="url(#g)"/>
                    <circle cx="60" cy="150" r="1.4" fill="url(#g)"/>
                    <circle cx="170" cy="140" r="1.3" fill="url(#g)"/>
                </svg>
            </div>
        </div>
    </div>

    <!-- é¡µé¢å†…å®¹åŒºåŸŸ -->
    <div id="content"
         class="relative z-10 w-full flex-1 flex flex-col safe-top safe-bottom">
    </div>

    <!-- å¾®ä¿¡é¡¶éƒ¨å°æç¤º -->
    <div id="wx-tip"
         class="hidden fixed top-0 left-0 right-0 z-30 bg-black/80 text-white text-[11px] px-4 py-2 text-center">
        åœ¨å¾®ä¿¡ä¸­æµè§ˆæ—¶ï¼Œæ¨èç‚¹å‡»å³ä¸Šè§’ â€œÂ·Â·Â·â€ ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œä½“éªŒæ›´æµç•… ğŸ‘
    </div>
</div>

<script>
    // ---------- 1. é¢˜ç›® ----------
    const questions = [
        {
            id: 1, question: "ä½ çš„èƒ½é‡æ¥è‡ªå“ªé‡Œï¼Ÿ",
            options: [
                { text: "A. è¢«äººçœ‹è§ã€è¢«è®¤å¯", weights: ["peach", "cherry"] },
                { text: "B. ç‹¬å¤„æ—¶çš„çµæ„Ÿå’Œå¹»æƒ³", weights: ["kiwi", "watermelon"] },
                { text: "C. å¸®åŠ©åˆ«äººã€å¸¦æ¥æ¸©æš–", weights: ["lemon", "pomegranate"] }
            ]
        },
        {
            id: 2, question: "å½“æƒ…ç»ªä½è½æ—¶ï¼Œä½ ä¼šï¼Ÿ",
            options: [
                { text: "A. ç”¨ç¬‘æ©é¥°ä¸€åˆ‡ï¼Œå‡è£…æ²¡äº‹", weights: ["orange", "pineapple"] },
                { text: "B. è¿œç¦»äººç¾¤ï¼Œç‹¬è‡ªç–—æ„ˆ", weights: ["lemon", "dragonfruit"] },
                { text: "C. å»åšç‚¹æœ‰è¶£çš„äº‹è®©è‡ªå·±åŠ¨èµ·æ¥", weights: ["peach", "guava"] }
            ]
        },
        {
            id: 3, question: "åœ¨äººç¾¤ä¸­ï¼Œä½ é€šå¸¸æ˜¯ï¼Ÿ",
            options: [
                { text: "A. æ´»è·ƒçš„ä¸­å¿ƒäººç‰©", weights: ["peach", "orange"] },
                { text: "B. å†·é™è§‚å¯Ÿè€…", weights: ["kiwi", "sugarcane", "starfruit"] },
                { text: "C. è‡ªç„¶æµéœ²é­…åŠ›ï¼Œä¸åˆ»æ„ä½†è¢«å–œæ¬¢", weights: ["pineapple", "watermelon"] }
            ]
        },
        {
            id: 4, question: "ä½ æ›´ç›¸ä¿¡å“ªç§å¹¸ç¦ï¼Ÿ",
            options: [
                { text: "A. çƒ­çƒˆä¸”çŸ­æš‚çš„ç¬é—´", weights: ["peach", "cherry"] },
                { text: "B. é•¿ä¹…ç¨³å®šçš„é™ªä¼´", weights: ["pomegranate", "lemon"] },
                { text: "C. ç‹¬è‡ªä¹Ÿèƒ½å‘å…‰çš„è‡ªç”±", weights: ["kiwi", "guava", "dragonfruit"] }
            ]
        },
        {
            id: 5, question: "å¦‚æœç”¨ä¸€å¥è¯å½¢å®¹ä½ çš„äººç”Ÿæ€åº¦ï¼š",
            options: [
                { text: "A. â€œæˆ‘æƒ³è¢«çœ‹è§ã€‚â€", weights: ["peach", "cherry"] },
                { text: "B. â€œæˆ‘ä¸å®Œç¾ï¼Œä½†æˆ‘è‡ªç”±ã€‚â€", weights: ["guava", "dragonfruit"] },
                { text: "C. â€œæˆ‘ç”¨çˆ±å»ä¿®å¤ä¸€åˆ‡ã€‚â€", weights: ["lemon", "pomegranate"] }
            ]
        },
        {
            id: 6, question: "ä½ æœ€æ¸´æœ›åˆ«äººæ€æ ·çœ‹ä½ ï¼Ÿ",
            options: [
                { text: "A. é…·ã€æœ‰è¶£ã€ç‹¬ç‰¹", weights: ["kiwi", "starfruit", "pineapple"] },
                { text: "B. æ¸©æŸ”ã€æœ‰æ·±åº¦", weights: ["lemon", "pomegranate", "dragonfruit"] },
                { text: "C. è‡ªä¿¡ã€é—ªäº®ã€éš¾ä»¥å¿˜è®°", weights: ["peach", "cherry", "orange"] }
            ]
        }
    ];

    // ---------- 2. ç»“æœé…ç½®ï¼ˆç”¨ Emojiï¼Œå¯é€‰å›¾åºŠä½ imgUrlï¼‰ ----------
    const results = {
        peach: {
            emoji: "ğŸ‘",
            imgUrl: "", // è‹¥æœ‰å›¾åºŠåœ°å€ï¼Œå¯å†™åœ¨è¿™é‡Œ
            name: "æ¡ƒå­äººæ ¼",
            color: "from-pink-400 to-orange-300",
            title: "è¢«çœ‹è§çš„è‰ºæœ¯å®¶",
            keywords: ["æŸ”è½¯", "å¤–å‘", "å¾®å­¤ç‹¬"],
            quote: "â€œæˆ‘å‡†å¤‡å¥½äº†è¢«çœ‹è§ã€‚â€",
            desc: "ç”œç¾åˆæœ‰ç‚¹å±é™©ï¼Œç¤¾äº¤é«˜æ‰‹ã€çµé­‚å­¤ç‹¬ã€‚ä½ è¯»æ‡‚åˆ«äººï¼Œä¹Ÿå¶å°”è¯»ä¸æ‡‚è‡ªå·±ï¼Œåœ¨è¢«å›´è§‚å’Œè¢«ç†è§£ä¹‹é—´æ¥å›æ‘‡æ‘†ã€‚",
            matchName: "æŸ æª¬äººæ ¼",
            matchDesc: "ä»–æ˜¯é…¸çš„è§£è¯ï¼Œä½ æ˜¯ç”œçš„å¼•çº¿ã€‚ä½ è´Ÿè´£ç‚¹ç‡ƒï¼ŒTAè´Ÿè´£è®©ä¸€åˆ‡å›åˆ°ç°å®ã€‚"
        },
        lemon: {
            emoji: "ğŸ‹",
            imgUrl: "",
            name: "æŸ æª¬äººæ ¼",
            color: "from-yellow-400 to-green-300",
            title: "é…¸æ¶©çš„æ®‰é“è€…",
            keywords: ["æ¸…é†’", "ç–—æ„ˆ", "å¾®å…‰"],
            quote: "â€œé»‘å¤œè¶Šæ·±ï¼Œé…¸æ¥šè¶Šäº®ã€‚â€",
            desc: "ä½ æ˜¯åˆ€é”‹ä¸‹çš„æ¸©æŸ”æ²»æ„ˆè€…ã€‚çœ‹å¾—å¾ˆæ¸…æ¥šï¼Œä¹Ÿæ„Ÿå—å¾—å¾ˆæ·±ã€‚ä½ æ‡‚æ‰€æœ‰äººçš„éš¾ï¼Œå´å¾ˆå°‘æ‰¿è®¤è‡ªå·±çš„ç´¯ã€‚",
            matchName: "æ¡ƒå­äººæ ¼",
            matchDesc: "ä¸€ä¸ªæ•¢çˆ±ï¼Œä¸€ä¸ªæ•¢æ•‘ã€‚ä½ å¸®æ¡ƒå­çœ‹æ¸…ç°å®ï¼Œæ¡ƒå­è®©ä½ ç›¸ä¿¡æµªæ¼«ã€‚"
        },
        cherry: {
            emoji: "ğŸ’",
            imgUrl: "",
            name: "è½¦å˜å­äººæ ¼",
            color: "from-red-600 to-pink-600",
            title: "ç²¾è‡´çš„å¹»æ¢¦å¨ƒå¨ƒ",
            keywords: ["å®Œç¾ä¸»ä¹‰", "è¢«å‡è§†", "èº«ä»½ç„¦è™‘"],
            quote: "â€œæˆ‘é—ªè€€ï¼Œä¹Ÿæ˜“ç¢ã€‚â€",
            desc: "ä½ å¤©ç”Ÿå¸¦ç€é•œå¤´æ„Ÿï¼Œèµ°åˆ°å“ªé‡Œéƒ½æ˜¯ç„¦ç‚¹ã€‚ä½†è¶Šè¢«çœ‹è§ï¼Œå°±è¶Šæ€•æš´éœ²è„†å¼±ã€‚ä½ åœ¨é—ªè€€ä¸è‡ªæˆ‘æ€€ç–‘ä¸­åå¤åˆ‡æ¢ã€‚",
            matchName: "æ¨æ¡ƒäººæ ¼",
            matchDesc: "æ£±è§’ä¸å…‰ç¯çš„æ‹¥æŠ±ã€‚ä½ ä»¬ä¸€ä¸ªè´Ÿè´£å‘å…‰ï¼Œä¸€ä¸ªè´Ÿè´£è¯´çœŸè¯ã€‚"
        },
        pineapple: {
            emoji: "ğŸ",
            imgUrl: "",
            name: "è èäººæ ¼",
            color: "from-yellow-500 to-orange-500",
            title: "åˆ€é”‹ä¸Šçš„æ¸©æŸ”è´µæ—",
            keywords: ["é‡å¿ƒ", "è‡ªå¾‹", "éšå¿"],
            quote: "â€œæˆ‘ç¬‘ç€è¢«åˆ‡å¼€ï¼Œå› ä¸ºæˆ‘æœ‰é‡‘è‰²çš„å¿ƒã€‚â€",
            desc: "ä½ å¼ºå¤§ã€æ¸…é†’ã€ç›®æ ‡æ˜ç¡®ã€‚åˆ«äººçœ‹åˆ°çš„æ˜¯ä½ çš„åˆºï¼Œå´å¿½ç•¥ä½ å†…é‡Œçš„é¦™å’Œç”œã€‚",
            matchName: "è¥¿ç“œäººæ ¼",
            matchDesc: "åˆ€ä¸æœè‚‰ï¼Œäº’ä¸ºæŸ”è½¯ã€‚TAè®©ä½ å¸ä¸‹ç›”ç”²ï¼Œä½ è®©TAçœ‹è§è¾¹ç•Œã€‚"
        },
        kiwi: {
            emoji: "ğŸ¥",
            imgUrl: "",
            name: "å¥‡å¼‚æœäººæ ¼",
            color: "from-green-400 to-emerald-600",
            title: "å­¤å²›å¤©æ‰",
            keywords: ["ç‹¬ç«‹", "å†…æ•›", "çµæ„Ÿ"],
            quote: "â€œæ€ªï¼Œä¹Ÿæ˜¯ä¸€ç§å¤©èµ‹ã€‚â€",
            desc: "ä½ æ˜¯æœ‰ç‚¹æ¯›èºã€åˆå¾ˆé€šé€çš„è‰ºæœ¯æ€ªèƒã€‚ä¸–ç•Œä¸ä¸€å®šæ‡‚ä½ ï¼Œä½†çµæ„Ÿæ°¸è¿œç«™åœ¨ä½ è¿™è¾¹ã€‚",
            matchName: "ç«é¾™æœäººæ ¼",
            matchDesc: "ç†æ€§ä¸è‰³ä¸½çš„å’Œå¼¦ã€‚ä½ ä»¬ä¼šä¸€èµ·é€ ä¸€åº§åªå±äºå½¼æ­¤çš„å¹³è¡Œå®‡å®™ã€‚"
        },
        guava: {
            emoji: "ğŸ¥­", // æ²¡æœ‰èŠ­ä¹ emojiï¼Œç”¨èŠ’æœä»£æ›¿ä¸€ç‚¹å°æ··æ­
            imgUrl: "",
            name: "èŠ­ä¹äººæ ¼",
            color: "from-green-300 to-pink-300",
            title: "é‡è›®å¥³ç‹",
            keywords: ["çƒ­çƒˆ", "è‰æ ¹", "åå›"],
            quote: "â€œæˆ‘ä¸å®Œç¾ï¼Œä½†æˆ‘çœŸå®ã€‚â€",
            desc: "ä½ ä»ä¸ä¼ªè£…ï¼Œæƒ…ç»ªæ¥å°±æ¥ï¼Œèµ°å°±èµ°ã€‚ä½ æ˜¯äººç¾¤é‡Œæœ€åµé—¹çš„ä¸€é¢—å¿ƒï¼Œä¹Ÿæ˜¯æœ€çœŸè¯šçš„ä¸€é¢—å¿ƒã€‚",
            matchName: "çŸ³æ¦´äººæ ¼",
            matchDesc: "é‡ä¸æŸ”çš„å¹³è¡¡ã€‚ä½ å¸®TAæ’•å¼€è§„è®­ï¼ŒTAæ•™ä½ å¦‚ä½•å¿ƒç–¼è‡ªå·±ã€‚"
        },
        pomegranate: {
            emoji: "ğŸ…", // æ²¡æœ‰çŸ³æ¦´ emojiï¼Œç•ªèŒ„ä»£æ›¿
            imgUrl: "",
            name: "çŸ³æ¦´äººæ ¼",
            color: "from-red-500 to-orange-600",
            title: "è¢«èµç¾çš„ç‰ºç‰²è€…",
            keywords: ["æ¯æ€§", "æ‰¿å—", "é‡ç”Ÿ"],
            quote: "â€œæˆ‘çˆ±æ‰€æœ‰äººï¼Œä¹Ÿæƒ³è¢«è‡ªå·±çˆ±ã€‚â€",
            desc: "ä½ æ€»æ˜¯å…ˆç…§é¡¾åˆ«äººï¼Œå†æƒ³èµ·è‡ªå·±ã€‚ä½ æ“…é•¿ä»˜å‡ºï¼Œä¹Ÿåœ¨å­¦ç€æ‹’ç»ã€‚ä½ çš„æ¸©æŸ”ä¸æ˜¯å¤©ç”Ÿçš„è®¨å¥½ï¼Œè€Œæ˜¯è¢«ç£¨å‡ºæ¥çš„åŠ›é‡ã€‚",
            matchName: "èŠ­ä¹äººæ ¼",
            matchDesc: "ä¸€ä¸ªæ•™å¯¹æ–¹æ´»ï¼Œä¸€ä¸ªæ•™å¯¹æ–¹çˆ±ã€‚"
        },
        sugarcane: {
            emoji: "ğŸ§ƒ", // ç”˜è”—ä¹Ÿç”¨ä¸€ä¸ªé¥®æ–™è±¡å¾
            imgUrl: "",
            name: "ç”˜è”—äººæ ¼",
            color: "from-emerald-700 to-green-900",
            title: "ç”œçš„å¥‰çŒ®è€…",
            keywords: ["æ¸©é¡º", "éšå¿", "è‹é†’"],
            quote: "â€œè¿™æ¬¡ï¼Œæˆ‘ä¸ºè‡ªå·±ç”œã€‚â€",
            desc: "ä½ ä¹ æƒ¯æŠŠå¥½ä¸œè¥¿ç•™ç»™åˆ«äººï¼ŒæŠŠå‹åŠ›ç•™ç»™è‡ªå·±ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œä½ ç»ˆäºæ„è¯†åˆ°ï¼šä½ çš„ç”œï¼Œä¹Ÿå¯ä»¥åªä¸ºè‡ªå·±ä¿ç•™ã€‚",
            matchName: "è èäººæ ¼",
            matchDesc: "ç”œé‡ä¸Šåˆºï¼Œæ‰æˆå°±å®Œæ•´çš„å‘³é“ã€‚"
        },
        watermelon: {
            emoji: "ğŸ‰",
            imgUrl: "",
            name: "è¥¿ç“œäººæ ¼",
            color: "from-red-400 to-green-500",
            title: "å®‡å®™æµªæ¼«å®¶",
            keywords: ["æµåŠ¨", "æ¬¢ä¹", "å®½å®¹"],
            quote: "â€œæˆ‘ä¸æ€•è™šæ— ï¼Œå› ä¸ºæˆ‘è‡ªå¸¦å¼•åŠ›ã€‚â€",
            desc: "ä½ è‡ªç”±ã€æ¾å¼›ã€å¯¹ä¸–ç•Œä¿æŒå¥½å¥‡å¿ƒã€‚ä½ ä¸å¼ºæ±‚åˆ«äººç•™ä¸‹ï¼Œä½†æ„¿æ„ä¸ºå–œæ¬¢çš„äººä¸€ç›´äº®ç€ã€‚",
            matchName: "è èäººæ ¼",
            matchDesc: "é˜³å…‰æ’ä¸Šé‡‘è‰²ã€‚ä½ è®©TAè½¯ä¸€ç‚¹ï¼ŒTAè®©ä½ ç¨³ä¸€ç‚¹ã€‚"
        },
        dragonfruit: {
            emoji: "ğŸ‰",
            imgUrl: "",
            name: "ç«é¾™æœäººæ ¼",
            color: "from-fuchsia-600 to-pink-500",
            title: "è‰³ä¸½çš„å¹¸å­˜è€…",
            keywords: ["è‰ºæœ¯", "æƒ…ç»ª", "çœŸå¿ƒ"],
            quote: "â€œæˆ‘äº®è¿‡ï¼Œä¹Ÿç—›è¿‡ã€‚â€",
            desc: "ä½ åƒä¸€åœºæ°¸è¿œä¸ä¼šé‡æ¼”çš„ç°åœºæ¼”å‡ºã€‚å¤–è¡¨é²œè‰³ã€è¯­æ°”è½»æ¾ï¼Œå¿ƒé‡Œå´è—ç€å¾ˆå¤šæ²¡äººçŸ¥é“çš„é»‘æ´ã€‚",
            matchName: "å¥‡å¼‚æœäººæ ¼",
            matchDesc: "è‰³ä¸½ä¸å­¤ç‹¬çš„ç–—æ„ˆã€‚ä½ ä»¬äº’ç›¸æ‰¿è®¤å¯¹æ–¹çš„å¥‡æ€ªï¼Œä¹Ÿäº’ç›¸å®ˆæŠ¤å¯¹æ–¹çš„æ•æ„Ÿã€‚"
        },
        orange: {
            emoji: "ğŸŠ",
            imgUrl: "",
            name: "æ©™å­äººæ ¼",
            color: "from-orange-400 to-yellow-300",
            title: "å…ƒæ°”ä¹å¤©æ´¾",
            keywords: ["é˜³å…‰", "æ©é¥°", "æ´»åŠ›"],
            quote: "â€œæˆ‘çš„å¿«ä¹ï¼Œæ˜¯ä½ çš„å…‰ã€‚â€",
            desc: "ä½ æ˜¯æ‰€æœ‰äººå¿ƒé‡Œçš„å°å¤ªé˜³ã€‚ä½ ä¹ æƒ¯ç”¨ç¬‘å’Œæ®µå­æŒ¡ä½é»‘æš—ï¼Œä½†çœŸæ­£ç†è§£ä½ çš„äººå¹¶ä¸å¤šã€‚",
            matchName: "è¥¿ç“œäººæ ¼",
            matchDesc: "å¿«ä¹å åŠ å¿«ä¹ã€‚ä½ ä»¬ä¼šä¸€èµ·æŠŠæ—¥å¸¸è¿‡æˆå¤å¤©ã€‚"
        },
        starfruit: {
            emoji: "â­",
            imgUrl: "",
            name: "æ¨æ¡ƒäººæ ¼",
            color: "from-yellow-300 to-lime-300",
            title: "å­¤ç‹¬çš„ç†æƒ³å®¶",
            keywords: ["æ£±è§’", "ç‹¬ç‰¹", "æ´å¯Ÿ"],
            quote: "â€œæˆ‘æ˜¯æ˜Ÿæ˜Ÿçš„åˆ‡ç‰‡ã€‚â€",
            desc: "ä½ æœ‰é”‹åˆ©çš„è¾¹ï¼Œä¹Ÿæœ‰æŸ”è½¯çš„å¿ƒã€‚ä½ çœ‹ç©¿å¾ˆå¤šè™šå‡ï¼Œåˆä¸æ„¿è½»æ˜“è¯´ç ´ï¼Œåªæ˜¯æ‚„æ‚„ä¿æŒè·ç¦»ã€‚",
            matchName: "è½¦å˜å­äººæ ¼",
            matchDesc: "æ£±è§’ä¸å…‰ç¯çš„æ‹¥æŠ±ã€‚ä½ ä»¬ä¸€ä¸ªè´Ÿè´£åšæ¢¦ï¼Œä¸€ä¸ªè´Ÿè´£æ‹†ç©¿æ¢¦ã€‚"
        }
    };

    // ---------- 3. çŠ¶æ€ ----------
    let currentState = {
        view: 'start',
        currentQ: 0,
        answers: [],
        finalResult: null
    };

    const app = document.getElementById('content');

    // ---------- 4. æ¸²æŸ“ ----------
    function render() {
        app.innerHTML = "";
        if (currentState.view === 'start')   renderStart();
        else if (currentState.view === 'quiz')   renderQuiz();
        else if (currentState.view === 'loading') renderLoading();
        else if (currentState.view === 'result')  renderResult();
    }

    function renderStart() {
        const html = `
            <div class="flex flex-col items-center justify-center min-h-screen p-8 text-center animate-fade-in">
                <div class="text-[10px] tracking-[0.4em] opacity-70 mb-4 border-b border-white/40 pb-2">
                    ROACYZHENG Â· FRUIT UNIVERSE TEST
                </div>

                <h1 class="text-4xl font-bold mb-10 leading-tight drop-shadow-[0_0_15px_rgba(255,120,40,0.7)]">
                    ä½ çš„<span class="text-orange-400">æ°´æœäººæ ¼</span><br/>ç»é…æ˜¯è°ï¼Ÿ
                </h1>

                <div class="w-56 h-56 mb-10 relative">
                    <div class="absolute inset-0 bg-gradient-to-tr from-pink-500/40 to-yellow-500/40 rounded-full blur-2xl animate-pulse-slow"></div>
                    <div class="relative w-full h-full rounded-full border border-white/20 shadow-2xl bg-black/40 flex items-center justify-center">
                        <div class="text-6xl flex gap-1">
                            <span>ğŸ‘</span><span>ğŸ‹</span><span>ğŸ‰</span><span>ğŸ</span>
                        </div>
                    </div>
                </div>

                <p class="text-sm opacity-85 leading-relaxed mb-8 max-w-xs mx-auto">
                    åœ¨è‰ºæœ¯å®¶ <span class="font-semibold">éƒ‘å†²</span> çš„æ°´æœå®‡å®™é‡Œï¼Œ<br/>
                    æ¯ä¸€é¢—æœå®ï¼Œéƒ½æ˜¯ä¸€ä¸ªçµé­‚çš„éšå–»ã€‚
                </p>
                <p class="text-[11px] opacity-60 mb-10">
                    èŠ± 1 åˆ†é’Ÿï¼Œåˆ‡å¼€ä½ çš„å†…å¿ƒï¼Œçœ‹çœ‹ä½ æ˜¯å“ªé¢—æœï¼Œ<br/>ä»¥åŠâ€”â€”ä½ å‘½ä¸­æ³¨å®šçš„é‚£é¢—ã€Œç»é…ã€æ˜¯è°ã€‚
                </p>

                <button onclick="startQuiz()"
                        class="w-full max-w-[240px] py-3.5 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full font-bold text-lg shadow-[0_0_20px_rgba(255,165,0,0.5)] hover:scale-105 transition-transform active:scale-95 flex items-center justify-center gap-2 cursor-pointer">
                    å¼€å§‹æµ‹è¯• <span class="text-xl">â†’</span>
                </button>

                <div class="mt-6 text-[10px] opacity-40 tracking-[0.25em]">
                    SCROLL Â· SCREENSHOT Â· SHARE
                </div>
            </div>
        `;
        app.innerHTML = html;
    }

    function renderQuiz() {
        const q = questions[currentState.currentQ];
        const progress = ((currentState.currentQ + 1) / questions.length) * 100;

        const html = `
            <div class="min-h-screen p-6 flex flex-col animate-fade-in">
                <div class="flex justify-between items-end mb-6 mt-2">
                    <div class="text-4xl font-bold opacity-20 select-none">
                        Q${currentState.currentQ + 1}
                    </div>
                    <div class="text-xs tracking-widest opacity-60 mb-2">
                        ${currentState.currentQ + 1} / ${questions.length}
                    </div>
                </div>

                <div class="h-1 bg-white/10 w-full rounded-full overflow-hidden mb-10">
                    <div class="h-full bg-orange-400 transition-all duration-500 ease-out"
                         style="width: ${progress}%"></div>
                </div>

                <h2 class="text-2xl font-bold mb-10 leading-relaxed min-h-[80px] drop-shadow-md">
                    ${q.question}
                </h2>

                <div class="space-y-4 flex-1">
                    ${
                        q.options.map((opt, idx) => `
                            <button onclick="handleAnswer(${idx})"
                                    class="w-full text-left p-5 rounded-2xl bg-white/6 border border-white/12
                                           backdrop-blur-md hover:bg-white/18 hover:border-orange-400/60
                                           transition-all active:scale-[0.97] cursor-pointer">
                                <span class="text-base opacity-90">${opt.text}</span>
                            </button>
                        `).join('')
                    }
                </div>

                <div class="mt-10 text-[11px] opacity-45 text-center">
                    ä¸ç”¨çº ç»“å¤ªä¹…ï¼Œ<br/>ç¬¬ä¸€ååº”å¾€å¾€å°±æ˜¯ä½ çš„çœŸå®äººæ ¼ã€‚
                </div>
            </div>
        `;
        app.innerHTML = html;
    }

    function renderLoading() {
        const html = `
            <div class="min-h-screen bg-black flex flex-col items-center justify-center relative overflow-hidden">
                <div id="nebula"
                     class="w-48 h-48 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500
                            blur-2xl opacity-70 animate-spin-slow"></div>

                <div id="laser"
                     class="hidden absolute inset-0 flex items-center justify-center">
                    <div class="w-[200%] h-[1px] bg-white shadow-[0_0_30px_white] rotate-[-45deg] animate-slice"></div>
                </div>

                <div id="flash"
                     class="hidden absolute inset-0 bg-white z-30 animate-flash"></div>

                <div id="loadingText"
                     class="absolute bottom-32 text-xs tracking-[0.5em] font-light animate-pulse text-white/80">
                    æ­£åœ¨æ”¶é›†å®‡å®™ä¿¡å·...
                </div>
            </div>
        `;
        app.innerHTML = html;

        const laser  = document.getElementById('laser');
        const flash  = document.getElementById('flash');
        const text   = document.getElementById('loadingText');
        const nebula = document.getElementById('nebula');

        setTimeout(() => {
            text.innerText = "æ­£åœ¨åˆ‡å¼€çµé­‚...";
            laser.classList.remove('hidden');
            nebula.style.animation = 'none';
            nebula.style.transform = 'scale(1.4)';
            nebula.style.filter = 'brightness(1.6)';
        }, 1500);

        setTimeout(() => {
            text.innerText = "æ‰¾åˆ°äº†ã€‚";
            flash.classList.remove('hidden');
        }, 2800);

        setTimeout(() => {
            currentState.view = 'result';
            render();
        }, 3500);
    }

    function renderResult() {
        const res = currentState.finalResult;
        const matchRes =
            Object.values(results).find(r => r.name === res.matchName) || results.peach;

        // å¦‚æœä½ ä»¥åè¦ç”¨åœ¨çº¿å›¾åºŠï¼ŒæŠŠä¸‹é¢ emoji å¤§åœ†æ¢æˆ <img src="${res.imgUrl}"> å³å¯
        const html = `
            <div class="min-h-screen overflow-y-auto pb-32 animate-fade-in relative">
                <div class="p-6 flex justify-between items-center opacity-70 text-[11px]">
                    <span class="tracking-[0.35em]">FRUIT Â· UNIVERSE</span>
                    <button onclick="location.reload()" class="px-2 py-1 rounded-full bg-white/5 border border-white/10 text-xs">
                        é‡æ–°æµ‹è¯•
                    </button>
                </div>

                <div class="px-6 flex flex-col items-center">
                    <!-- ç»“æœå¤§åœ†ç›˜ï¼ˆEmojiï¼‰ -->
                    <div class="w-64 h-64 rounded-full border-2 border-white/20 p-2 mb-8 relative">
                        <div class="w-full h-full rounded-full overflow-hidden shadow-[0_0_40px_rgba(255,255,250,0.25)]
                                    relative bg-gradient-to-br ${res.color} flex items-center justify-center">
                            <span class="text-8xl drop-shadow-2xl">${res.emoji}</span>
                        </div>
                    </div>

                    <div class="text-center mb-2 text-xs tracking-[0.35em] opacity-60 uppercase">
                        Your Fruit Persona
                    </div>
                    <h1 class="text-4xl serif font-bold mb-3 text-center">
                        ${res.name}
                    </h1>

                    <div class="text-sm opacity-70 mb-4">
                        ã€Œ${res.title}ã€
                    </div>

                    <div class="flex flex-wrap justify-center gap-2 mb-8">
                        ${res.keywords.map(k =>
                            `<span class="text-xs px-3 py-1 rounded-full border border-white/20 bg-white/5 text-orange-200/85">
                                ${k}
                            </span>`
                        ).join('')}
                    </div>

                    <div class="text-lg serif italic opacity-90 text-center mb-10 leading-relaxed max-w-xs">
                        ${res.quote}
                    </div>

                    <div class="w-full bg-white/5 backdrop-blur-xl rounded-2xl p-6 border border-white/10 mb-8">
                        <h3 class="text-[11px] opacity-60 uppercase tracking-wider mb-2">äººæ ¼åˆ‡ç‰‡ Â· Analysis</h3>
                        <p class="text-sm leading-7 text-gray-200 text-justify">
                            ${res.desc}
                        </p>
                    </div>

                    <!-- ç»é…å¡ç‰‡ -->
                    <div class="w-full bg-gradient-to-r from-indigo-900/70 to-purple-900/70
                                rounded-2xl p-6 border border-white/12 mb-8 relative overflow-hidden">
                        <div class="absolute -right-16 -top-16 w-40 h-40 rounded-full bg-white/5 blur-2xl"></div>

                        <div class="relative z-10">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="text-2xl w-10 h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/25">
                                    ${matchRes.emoji}
                                </div>
                                <div>
                                    <div class="text-[10px] uppercase opacity-60 tracking-wider">Soulmate Fruit</div>
                                    <div class="font-bold text-lg">${res.matchName}</div>
                                </div>
                            </div>
                            <p class="text-xs opacity-90 leading-relaxed italic border-l-2 border-white/40 pl-3">
                                ${res.matchDesc}
                            </p>
                        </div>
                    </div>

                    <div class="w-full text-center text-[11px] opacity-55 pb-6 leading-relaxed">
                        Â· é•¿æŒ‰æˆªå›¾ï¼Œä¿å­˜ä½ çš„æ°´æœäººæ ¼ Â·<br/>
                        å¯ä»¥ @ROACYZHENG åˆ†äº«åˆ°ç¤¾äº¤å¹³å°ï¼Œ<br/>çœ‹çœ‹ä½ èº«è¾¹çš„æœ‹å‹éƒ½æ˜¯ä»€ä¹ˆæœã€‚
                    </div>
                </div>
            </div>
        `;
        app.innerHTML = html;
    }

    // ---------- 5. äº¤äº’ ----------
    function startQuiz() {
        currentState.view      = 'quiz';
        currentState.currentQ  = 0;
        currentState.answers   = [];
        currentState.finalResult = null;
        render();
    }

    function handleAnswer(idx) {
        currentState.answers.push(idx);

        if (currentState.currentQ < questions.length - 1) {
            currentState.currentQ++;
            render();
        } else {
            calculateResult();
            currentState.view = 'loading';
            render();
        }
    }

    function calculateResult() {
        let scores = {};
        currentState.answers.forEach((choiceIndex, qIndex) => {
            const weights = questions[qIndex].options[choiceIndex].weights;
            weights.forEach(fruit => {
                scores[fruit] = (scores[fruit] || 0) + 1;
            });
        });

        let maxScore = 0;
        for (let f in scores) if (scores[f] > maxScore) maxScore = scores[f];

        let winners = [];
        for (let f in scores) if (scores[f] === maxScore) winners.push(f);

        const winnerId = winners[Math.floor(Math.random() * winners.length)] || 'peach';
        currentState.finalResult = results[winnerId];
    }

    // ---------- 6. å¾®ä¿¡æ£€æµ‹ ----------
    (function detectWeChat() {
        const ua = navigator.userAgent.toLowerCase();
        if (ua.indexOf('micromessenger') !== -1) {
            const tip = document.getElementById('wx-tip');
            if (tip) tip.classList.remove('hidden');
        }
    })();

    // åˆå§‹åŒ–
    render();
</script>

</body>
</html>
