<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>ä½ çš„æ°´æœäººæ ¼ç»é…æ˜¯è°ï¼Ÿ</title>

    <!-- ç§»åŠ¨ç«¯é€‚é… -->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="format-detection" content="telephone=no,email=no" />
    <meta name="referrer" content="no-referrer" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

<style>
/* ---------------------------
   å¾®ä¿¡å‹å¥½å­—ä½“ï¼ˆæ—  Google Fontsï¼‰
---------------------------- */
body {
    font-family: -apple-system, BlinkMacSystemFont, system-ui,
                 "PingFang SC", "Hiragino Sans GB", "STHeiti",
                 "Microsoft YaHei", sans-serif;
    background-color: #000;
    color: #fff;
    overflow-x: hidden;
}

.serif {
    font-family: "STSong", "Songti SC", "FangSong",
                 "Noto Serif CJK SC", serif;
}

img {
    user-select: none;
    -webkit-user-drag: none;
}

/* ---------------------------
   åŠ¨ç”»ï¼ˆåŸæœ‰ï¼‰
---------------------------- */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
}
@keyframes pulse-slow {
    0%, 100% { transform: scale(1); opacity: 1; }
    50%      { transform: scale(1.04); opacity: 0.85; }
}
@keyframes spin-slow {
    from { transform: rotate(0deg); }
    to   { transform: rotate(360deg); }
}
@keyframes slice {
    0%   { width: 0; opacity: 0; left: -50%; }
    50%  { width: 200%; opacity: 1; }
    100% { left: 150%; opacity: 0; width: 0; }
}
@keyframes flash {
    0%   { opacity: 0; }
    50%  { opacity: 1; }
    100% { opacity: 0; }
}

/* ---------------------------
   å¼€å±èƒŒæ™¯åŠ¨æ€æ•ˆæœ
---------------------------- */

/* èƒŒæ™¯ï¼šæ¼‚æµ® + å‘¼å¸ */
@keyframes bgHeroFloat {
    0%   { transform: scale(1) translateY(0); }
    50%  { transform: scale(1.06) translateY(-8px); }
    100% { transform: scale(1) translateY(0); }
}
.bg-hero-animate {
    animation: bgHeroFloat 14s ease-in-out infinite;
    transform-origin: center center;
    will-change: transform;
}

/* æ˜Ÿå…‰é—ªçƒå±‚ */
.star-twinkle-layer {
    position: absolute;
    inset: 0;
    background-image:
        radial-gradient(circle at 10% 20%, rgba(255,255,255,0.70) 0, rgba(255,255,255,0) 45%),
        radial-gradient(circle at 80% 30%, rgba(255,230,180,0.8) 0, rgba(255,230,180,0) 50%),
        radial-gradient(circle at 20% 80%, rgba(150,200,255,0.7) 0, rgba(150,200,255,0) 55%);
    mix-blend-mode: screen;
    opacity: 0.28;
    animation: starTwinkle 6s ease-in-out infinite alternate;
    pointer-events: none;
}

/* æ˜Ÿå…‰æ˜æš—å˜åŒ– */
@keyframes starTwinkle {
    0%   { opacity: 0.1; transform: translate3d(0,0,0) scale(1); }
    50%  { opacity: 0.35; transform: translate3d(3px,-4px,0) scale(1.03); }
    100% { opacity: 0.18; transform: translate3d(-2px,3px,0) scale(1.01); }
}

@media (prefers-reduced-motion: reduce) {
    .bg-hero-animate,
    .star-twinkle-layer {
        animation: none !important;
        transform: none !important;
    }
}

.safe-top { padding-top: env(safe-area-inset-top); }
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }

</style>
</head>

<body class="flex justify-center min-h-screen">

<!-- æ‰‹æœºå±å¹•å®¹å™¨ -->
<div id="app"
     class="w-full max-w-[450px] bg-black relative shadow-2xl min-h-screen flex flex-col">

<!-- â­â­ å¼€å±èƒŒæ™¯ï¼ˆåŠ¨æ€ï¼‰ â­â­ -->
<div class="absolute inset-0 z-0 pointer-events-none">
    <div class="w-full h-full relative overflow-hidden">

        <!-- âš ï¸ è¿™é‡Œæ¢æˆä½ çš„æ–°è°ƒè‰²èƒŒæ™¯å›¾æ–‡ä»¶å -->
        <img src="å®¶.jpg"
             alt=""
             class="w-full h-full object-cover opacity-80 bg-hero-animate"
             style="filter: saturate(1.1) contrast(1.05);">

        <!-- åŸæœ‰çš„é»‘è‰²æ¸å˜ -->
        <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/55 to-black/90"></div>

        <!-- âœ¨ æ˜Ÿç©ºé—ªçƒå±‚ -->
        <div class="star-twinkle-layer"></div>
    </div>
</div>

<!-- å†…å®¹å®¹å™¨ -->
<div id="content" class="relative z-10 w-full flex-1 flex flex-col safe-top safe-bottom"></div>

<!-- å¾®ä¿¡æç¤º -->
<div id="wx-tip"
     class="hidden fixed top-0 left-0 right-0 z-30 bg-black/80 text-white text-[11px] px-4 py-2 text-center">
    åœ¨å¾®ä¿¡ä¸­æµè§ˆæ—¶ï¼Œæ¨èç‚¹å‡»å³ä¸Šè§’ â€œÂ·Â·Â·â€ ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œä½“éªŒæ›´æµç•… ğŸ‘
</div>
</div>

<script>
/* ---------------------------
    é¢˜ç›®ï¼ˆä¸åŠ¨ï¼‰
---------------------------- */
const questions = [
    {
        id: 1, question: "ä½ çš„èƒ½é‡æ¥è‡ªå“ªé‡Œï¼Ÿ",
        options: [
            { text: "A. è¢«äººçœ‹è§ã€è¢«è®¤å¯", weights: ["peach", "cherry"] },
            { text: "B. ç‹¬å¤„æ—¶çš„çµæ„Ÿå’Œå¹»æƒ³", weights: ["kiwi", "watermelon"] },
            { text: "C. å¸®åŠ©åˆ«äººã€å¸¦æ¥æ¸©æš–", weights: ["lemon", "pomegranate"] }
        ]
    },
    {
        id: 2, question: "å½“æƒ…ç»ªä½è½æ—¶ï¼Œä½ ä¼šï¼Ÿ",
        options: [
            { text: "A. ç”¨ç¬‘æ©é¥°ä¸€åˆ‡ï¼Œå‡è£…æ²¡äº‹", weights: ["orange", "pineapple"] },
            { text: "B. è¿œç¦»äººç¾¤ï¼Œç‹¬è‡ªç–—æ„ˆ", weights: ["lemon", "dragonfruit"] },
            { text: "C. å»åšç‚¹æœ‰è¶£çš„äº‹è®©è‡ªå·±åŠ¨èµ·æ¥", weights: ["peach", "guava"] }
        ]
    },
    {
        id: 3, question: "åœ¨äººç¾¤ä¸­ï¼Œä½ é€šå¸¸æ˜¯ï¼Ÿ",
        options: [
            { text: "A. æ´»è·ƒçš„ä¸­å¿ƒäººç‰©", weights: ["peach", "orange"] },
            { text: "B. å†·é™è§‚å¯Ÿè€…", weights: ["kiwi", "sugarcane", "starfruit"] },
            { text: "C. è‡ªç„¶æµéœ²é­…åŠ›ï¼Œä¸åˆ»æ„ä½†è¢«å–œæ¬¢", weights: ["pineapple", "watermelon"] }
        ]
    },
    {
        id: 4, question: "ä½ æ›´ç›¸ä¿¡å“ªç§å¹¸ç¦ï¼Ÿ",
        options: [
            { text: "A. çƒ­çƒˆä¸”çŸ­æš‚çš„ç¬é—´", weights: ["peach", "cherry"] },
            { text: "B. é•¿ä¹…ç¨³å®šçš„é™ªä¼´", weights: ["pomegranate", "lemon"] },
            { text: "C. ç‹¬è‡ªä¹Ÿèƒ½å‘å…‰çš„è‡ªç”±", weights: ["kiwi", "guava", "dragonfruit"] }
        ]
    },
    {
        id: 5, question: "å¦‚æœç”¨ä¸€å¥è¯å½¢å®¹ä½ çš„äººç”Ÿæ€åº¦ï¼š",
        options: [
            { text: "A. â€œæˆ‘æƒ³è¢«çœ‹è§ã€‚â€", weights: ["peach", "cherry"] },
            { text: "B. â€œæˆ‘ä¸å®Œç¾ï¼Œä½†æˆ‘è‡ªç”±ã€‚â€", weights: ["guava", "dragonfruit"] },
            { text: "C. â€œæˆ‘ç”¨çˆ±å»ä¿®å¤ä¸€åˆ‡ã€‚â€", weights: ["lemon", "pomegranate"] }
        ]
    },
    {
        id: 6, question: "ä½ æœ€æ¸´æœ›åˆ«äººæ€æ ·çœ‹ä½ ï¼Ÿ",
        options: [
            { text: "A. é…·ã€æœ‰è¶£ã€ç‹¬ç‰¹", weights: ["kiwi", "starfruit", "pineapple"] },
            { text: "B. æ¸©æŸ”ã€æœ‰æ·±åº¦", weights: ["lemon", "pomegranate", "dragonfruit"] },
            { text: "C. è‡ªä¿¡ã€é—ªäº®ã€éš¾ä»¥å¿˜è®°", weights: ["peach", "cherry", "orange"] }
        ]
    }
];

/* ---------------------------
    ç»“æœé…ç½®ï¼ˆç”¨ä½ çš„ä¸­æ–‡æ–‡ä»¶åï¼‰
---------------------------- */
const results = {
    peach: { img: "æ¡ƒå­.jpg", name: "æ¡ƒå­äººæ ¼", icon: "ğŸ‘",
        title:"è¢«çœ‹è§çš„è‰ºæœ¯å®¶",
        keywords:["æŸ”è½¯","å¤–å‘","å¾®å­¤ç‹¬"],
        quote:"â€œæˆ‘å‡†å¤‡å¥½äº†è¢«çœ‹è§ã€‚â€",
        desc:"ç”œç¾åˆæœ‰ç‚¹å±é™©â€¦",
        matchName:"æŸ æª¬äººæ ¼",
        matchDesc:"ä»–æ˜¯é…¸çš„è§£è¯ï¼Œä½ æ˜¯ç”œçš„å¼•çº¿ã€‚"
    },
    lemon: { img: "æŸ æª¬.jpg", name: "æŸ æª¬äººæ ¼", icon: "ğŸ‹",
        title:"é…¸æ¶©çš„æ®‰é“è€…",
        keywords:["æ¸…é†’","ç–—æ„ˆ","å¾®å…‰"],
        quote:"â€œé»‘å¤œè¶Šæ·±ï¼Œé…¸æ¥šè¶Šäº®ã€‚â€",
        desc:"ä½ æ˜¯åˆ€é”‹ä¸‹çš„æ¸©æŸ”æ²»æ„ˆè€…â€¦",
        matchName:"æ¡ƒå­äººæ ¼",
        matchDesc:"ä¸€ä¸ªæ•¢çˆ±ï¼Œä¸€ä¸ªæ•¢æ•‘ã€‚"
    },
    cherry: { img: "æ¨±æ¡ƒ.jpg", name: "è½¦å˜å­äººæ ¼", icon:"ğŸ’",
        title:"ç²¾è‡´çš„å¹»æ¢¦å¨ƒå¨ƒ",
        keywords:["å®Œç¾ä¸»ä¹‰","è¢«å‡è§†","èº«ä»½ç„¦è™‘"],
        quote:"â€œæˆ‘é—ªè€€ï¼Œä¹Ÿæ˜“ç¢ã€‚â€",
        desc:"ä½ å¸¦ç€é•œå¤´æ„Ÿâ€¦",
        matchName:"æ¨æ¡ƒäººæ ¼",
        matchDesc:"æ£±è§’ä¸å…‰ç¯çš„æ‹¥æŠ±ã€‚"
    },

    pineapple: { img:"è è.jpg", name:"è èäººæ ¼", icon:"ğŸ",
        title:"åˆ€é”‹ä¸Šçš„æ¸©æŸ”è´µæ—",
        keywords:["é‡å¿ƒ","è‡ªå¾‹","éšå¿"],
        quote:"â€œæˆ‘ç¬‘ç€è¢«åˆ‡å¼€ï¼Œå› ä¸ºæˆ‘æœ‰é‡‘è‰²çš„å¿ƒã€‚â€",
        desc:"ä½ å¼ºå¤§ã€æ¸…é†’â€¦",
        matchName:"è¥¿ç“œäººæ ¼",
        matchDesc:"åˆ€ä¸æœè‚‰ï¼Œäº’ä¸ºæŸ”è½¯ã€‚"
    },

    kiwi:{ img:"kiwi.jpg", name:"å¥‡å¼‚æœäººæ ¼", icon:"ğŸ¥",
        title:"å­¤å²›å¤©æ‰",
        keywords:["ç‹¬ç«‹","å†…æ•›","çµæ„Ÿ"],
        quote:"â€œæ€ªï¼Œä¹Ÿæ˜¯ä¸€ç§å¤©èµ‹ã€‚â€",
        desc:"ä½ æ˜¯è‰ºæœ¯æ€ªèƒâ€¦",
        matchName:"ç«é¾™æœäººæ ¼",
        matchDesc:"ç†æ€§ä¸è‰³ä¸½çš„å’Œå¼¦ã€‚"
    },

    guava:{ img:"ç•ªçŸ³æ¦´.jpg", name:"èŠ­ä¹äººæ ¼", icon:"ğŸ¥­",
        title:"é‡è›®å¥³ç‹",
        keywords:["çƒ­çƒˆ","è‰æ ¹","åå›"],
        quote:"â€œæˆ‘ä¸å®Œç¾ï¼Œä½†æˆ‘çœŸå®ã€‚â€",
        desc:"ä½ ä»ä¸ä¼ªè£…â€¦",
        matchName:"çŸ³æ¦´äººæ ¼",
        matchDesc:"é‡ä¸æŸ”çš„å¹³è¡¡ã€‚"
    },

    pomegranate:{ img:"çŸ³æ¦´.jpg", name:"çŸ³æ¦´äººæ ¼", icon:"ğŸ…",
        title:"è¢«èµç¾çš„ç‰ºç‰²è€…",
        keywords:["æ¯æ€§","æ‰¿å—","é‡ç”Ÿ"],
        quote:"â€œæˆ‘çˆ±æ‰€æœ‰äººï¼Œä¹Ÿæƒ³è¢«è‡ªå·±çˆ±ã€‚â€",
        desc:"ä½ æ€»æ˜¯å…ˆç…§é¡¾åˆ«äººâ€¦",
        matchName:"èŠ­ä¹äººæ ¼",
        matchDesc:"ä¸€ä¸ªæ•™å¯¹æ–¹æ´»ï¼Œä¸€ä¸ªæ•™å¯¹æ–¹çˆ±ã€‚"
    },

    sugarcane:{ img:"ç”˜è”—.jpg", name:"ç”˜è”—äººæ ¼", icon:"ğŸ§ƒ",
        title:"ç”œçš„å¥‰çŒ®è€…",
        keywords:["æ¸©é¡º","éšå¿","è‹é†’"],
        quote:"â€œè¿™æ¬¡ï¼Œæˆ‘ä¸ºè‡ªå·±ç”œã€‚â€",
        desc:"ä½ ä¹ æƒ¯æŠŠå¥½ä¸œè¥¿ç•™ç»™åˆ«äººâ€¦",
        matchName:"è èäººæ ¼",
        matchDesc:"ç”œé‡ä¸Šåˆºï¼Œæ‰å®Œæ•´ã€‚"
    },

    watermelon:{ img:"è¥¿ç“œ.jpg", name:"è¥¿ç“œäººæ ¼", icon:"ğŸ‰",
        title:"å®‡å®™æµªæ¼«å®¶",
        keywords:["æµåŠ¨","æ¬¢ä¹","å®½å®¹"],
        quote:"â€œæˆ‘ä¸æ€•è™šæ— ï¼Œå› ä¸ºæˆ‘è‡ªå¸¦å¼•åŠ›ã€‚â€",
        desc:"ä½ è‡ªç”±ã€æ¾å¼›â€¦",
        matchName:"è èäººæ ¼",
        matchDesc:"é˜³å…‰æ’ä¸Šé‡‘è‰²ã€‚"
    },

    dragonfruit:{ img:"ç«é¾™æœ.jpg", name:"ç«é¾™æœäººæ ¼", icon:"ğŸ‰",
        title:"è‰³ä¸½çš„å¹¸å­˜è€…",
        keywords:["è‰ºæœ¯","æƒ…ç»ª","çœŸå¿ƒ"],
        quote:"â€œæˆ‘äº®è¿‡ï¼Œä¹Ÿç—›è¿‡ã€‚â€",
        desc:"ä½ åƒä¸€åœºæ°¸ä¸é‡æ¼”çš„ç°åœºâ€¦",
        matchName:"å¥‡å¼‚æœäººæ ¼",
        matchDesc:"è‰³ä¸½ä¸å­¤ç‹¬çš„ç–—æ„ˆã€‚"
    },

    orange:{ img:"orange.jpg", name:"æ©™å­äººæ ¼", icon:"ğŸŠ",
        title:"å…ƒæ°”ä¹å¤©æ´¾",
        keywords:["é˜³å…‰","æ©é¥°","æ´»åŠ›"],
        quote:"â€œæˆ‘çš„å¿«ä¹ï¼Œæ˜¯ä½ çš„å…‰ã€‚â€",
        desc:"ä½ æ˜¯æ‰€æœ‰äººå¿ƒé‡Œçš„å°å¤ªé˜³â€¦",
        matchName:"è¥¿ç“œäººæ ¼",
        matchDesc:"å¿«ä¹å åŠ å¿«ä¹ã€‚"
    },

    starfruit:{ img:"æ˜Ÿæœ.jpg", name:"æ¨æ¡ƒäººæ ¼", icon:"â­",
        title:"å­¤ç‹¬çš„ç†æƒ³å®¶",
        keywords:["æ£±è§’","ç‹¬ç‰¹","æ´å¯Ÿ"],
        quote:"â€œæˆ‘æ˜¯æ˜Ÿæ˜Ÿçš„åˆ‡ç‰‡ã€‚â€",
        desc:"ä½ æœ‰é”‹åˆ©çš„è¾¹ï¼Œä¹Ÿæœ‰æŸ”è½¯çš„å¿ƒâ€¦",
        matchName:"è½¦å˜å­äººæ ¼",
        matchDesc:"ä¸€ä¸ªåšæ¢¦ï¼Œä¸€ä¸ªæ‹†æ¢¦ã€‚"
    }
};

/* ---------------------------
    çŠ¶æ€ç®¡ç†
---------------------------- */
let currentState = {
    view: 'start',
    currentQ: 0,
    answers: [],
    finalResult: null
};

const app = document.getElementById('content');

/* ---------------------------
    æ¸²æŸ“å‡½æ•°ï¼ˆä¿æŒä¸ä½ åŸæ¥ä¸€è‡´ï¼‰
---------------------------- */
function render() {
    app.innerHTML = '';
    if (currentState.view === 'start') renderStart();
    else if (currentState.view === 'quiz') renderQuiz();
    else if (currentState.view === 'loading') renderLoading();
    else if (currentState.view === 'result') renderResult();
}

/* ---------------------------
    é¦–é¡µæ¸²æŸ“ï¼ˆå·²é€‚é…ä¸­æ–‡æ–‡ä»¶åï¼‰
---------------------------- */
function renderStart() {
    const thumbFruits = [
        { key:'peach', img:'æ¡ƒå­.jpg' },
        { key:'lemon', img:'æŸ æª¬.jpg' },
        { key:'orange', img:'orange.jpg' },
        { key:'kiwi', img:'kiwi.jpg' },
        { key:'pineapple', img:'è è.jpg' },
        { key:'pomegranate', img:'çŸ³æ¦´.jpg' },
        { key:'starfruit', img:'æ˜Ÿæœ.jpg' },
        { key:'watermelon', img:'è¥¿ç“œ.jpg' }
    ];

    const html = `
    <div class="flex flex-col justify-between min-h-screen px-6 pt-10 pb-10 animate-fade-in">
        <header class="mb-4">
            <div class="text-[10px] tracking-[0.4em] opacity-70 mb-2">
                ROACYZHENG Â· FRUIT UNIVERSE
            </div>
            <h1 class="text-3xl font-bold leading-snug">
                ä½ çš„<span class="text-orange-300">æ°´æœäººæ ¼</span><br/>ç»é…æ˜¯è°ï¼Ÿ
            </h1>
        </header>

        <section class="mt-4 mb-8">
            <div class="w-full rounded-3xl border border-white/15 bg-black/35 backdrop-blur-md px-4 py-4">
                <div class="text-[11px] opacity-70 mb-3">
                    åœ¨è‰ºæœ¯å®¶ <span class="font-semibold">éƒ‘å†²</span> çš„ã€Œæ°´æœå®‡å®™ã€é‡Œï¼Œæ¯ä¸€é¢—æœå®éƒ½æ˜¯çµé­‚çš„éšå–»ã€‚
                </div>
                <div class="flex items-center gap-3 overflow-x-auto pb-1">
                    ${thumbFruits.map(f => `
                        <div class="flex-shrink-0 w-12 h-12 rounded-full border border-white/40 overflow-hidden shadow-md">
                            <img src="${f.img}" class="w-full h-full object-cover" />
                        </div>
                    `).join('')}
                </div>
            </div>
        </section>

        <footer class="flex flex-col items-center gap-4">
            <button onclick="startQuiz()"
                class="w-full max-w-[260px] py-3.5 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full font-bold text-lg shadow-lg">
                å¼€å§‹åˆ‡å¼€çµé­‚ â†’
            </button>
        </footer>
    </div>
    `;
    app.innerHTML = html;
}

/* ---------------------------
    ç­”é¢˜é¡µï¼ˆä¸åŠ¨ï¼‰
---------------------------- */
function renderQuiz() {
    const q = questions[currentState.currentQ];
    const progress = ((currentState.currentQ + 1) / questions.length) * 100;

    const html = `
        <div class="min-h-screen px-6 pt-6 pb-8 flex flex-col animate-fade-in">

            <div class="mb-4">
                <div class="flex justify-between items-center mb-2">
                    <div class="text-xs opacity-70">FRUIT TEST</div>
                    <div class="text-[11px] opacity-70">${currentState.currentQ + 1} / ${questions.length}</div>
                </div>
                <div class="h-1 bg-white/10 rounded-full overflow-hidden">
                    <div class="h-full bg-orange-400" style="width:${progress}%"></div>
                </div>
            </div>

            <div class="flex-1">
                <h2 class="text-2xl font-bold mb-6">${q.question}</h2>
                <div class="space-y-4">
                    ${q.options.map((opt,i)=>`
                        <button onclick="handleAnswer(${i})"
                            class="w-full p-5 rounded-2xl bg-black/45 border border-white/15 backdrop-blur-md">
                            ${opt.text}
                        </button>
                    `).join('')}
                </div>
            </div>

        </div>`;
    app.innerHTML = html;
}

/* ---------------------------
    Loading é¡µé¢
---------------------------- */
function renderLoading() {
    app.innerHTML = `
        <div class="min-h-screen bg-black flex flex-col items-center justify-center relative overflow-hidden">
            <div class="w-48 h-48 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 blur-2xl opacity-70 animate-spin-slow"></div>
            <div class="absolute bottom-32 text-xs opacity-80">æ­£åœ¨åˆ‡å¼€çµé­‚...</div>
        </div>
    `;
    setTimeout(()=>{ currentState.view='result'; render(); },2800);
}

/* ---------------------------
    ç»“æœé¡µï¼ˆä¸åŠ¨ï¼‰
---------------------------- */
function renderResult() {
    const res = currentState.finalResult;
    const matchRes = Object.values(results).find(r => r.name === res.matchName);

    const html = `
    <div class="min-h-screen overflow-y-auto pb-32 animate-fade-in relative">
        <div class="px-6 pt-6 flex justify-between items-center opacity-80 text-[11px]">
            <span class="tracking-[0.28em]">FRUIT UNIVERSE</span>
            <button onclick="location.reload()" class="px-2 py-1 rounded-full bg-white/8 border">é‡æ–°æµ‹è¯•</button>
        </div>

        <div class="px-6 flex flex-col items-center mt-3">

            <div class="w-64 h-64 rounded-full border-2 border-white/25 p-2 mb-6 relative">
                <div class="w-full h-full rounded-full overflow-hidden">
                    <img src="${res.img}" class="w-full h-full object-cover">
                </div>
                <div class="absolute -bottom-3 left-1/2 -translate-x-1/2 text-[11px] px-3 py-1 rounded-full bg-black/70 border">
                    ${res.icon} ${res.name}
                </div>
            </div>

            <h1 class="text-3xl serif font-bold mb-2 text-center">${res.title}</h1>

            <div class="flex flex-wrap justify-center gap-2 mb-8">
                ${res.keywords.map(k=>`<span class="text-xs px-3 py-1 rounded-full border bg-white/6">${k}</span>`).join('')}
            </div>

            <div class="text-lg serif italic opacity-90 text-center mb-8 max-w-xs">${res.quote}</div>

            <div class="w-full bg-black/55 backdrop-blur-xl rounded-2xl p-6 border mb-10">
                <h3 class="text-[11px] opacity-60 mb-2">äººæ ¼åˆ‡ç‰‡ Â· Analysis</h3>
                <p class="text-sm leading-7">${res.desc}</p>
            </div>

            <!-- ç»é…åŒº -->
            <div class="w-full bg-gradient-to-r from-indigo-900/70 to-purple-900/70 rounded-2xl p-6 border">
                <div class="flex gap-4 items-center">
                    <div class="w-16 h-16 rounded-full overflow-hidden">
                        <img src="${matchRes.img}" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <div class="text-[11px] opacity-60">Soulmate Fruit</div>
                        <div class="font-semibold mb-2">${res.matchName}</div>
                        <p class="text-xs italic border-l-2 pl-3">${res.matchDesc}</p>
                    </div>
                </div>
            </div>

            <div class="w-full text-center text-[11px] opacity-55 pb-6">
                é•¿æŒ‰æˆªå›¾ä¿å­˜ä½ çš„æ°´æœäººæ ¼<br/>
                æ¬¢è¿åˆ†äº«åˆ°ç¤¾äº¤å¹³å° TAG @ROACYZHENG
            </div>

        </div>
    </div>
    `;
    app.innerHTML = html;
}

/* ---------------------------
    äº¤äº’
---------------------------- */
function startQuiz() {
    currentState = { view:'quiz', currentQ:0, answers:[], finalResult:null };
    render();
}

function handleAnswer(i) {
    currentState.answers.push(i);
    if (currentState.currentQ < questions.length - 1) {
        currentState.currentQ++;
        render();
    } else {
        calculateResult();
        currentState.view='loading';
        render();
    }
}

function calculateResult() {
    let scores = {};
    currentState.answers.forEach((choice,qIndex)=>{
        questions[qIndex].options[choice].weights.forEach(f=>{
            scores[f] = (scores[f]||0) + 1;
        });
    });

    let max = Math.max(...Object.values(scores));
    let winners = Object.keys(scores).filter(f=>scores[f]===max);
    currentState.finalResult = results[winners[Math.floor(Math.random()*winners.length)]];
}

/* ---------------------------
    å¾®ä¿¡ç¯å¢ƒæ£€æµ‹
---------------------------- */
(function detectWeChat() {
    if (/micromessenger/.test(navigator.userAgent.toLowerCase())) {
        document.getElementById('wx-tip').classList.remove('hidden');
    }
})();
 
render();
</script>

</body>
</html>
